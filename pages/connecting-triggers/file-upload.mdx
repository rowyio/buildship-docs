---
title: Rest API File Upload
description:
  The Rest API File Upload Trigger is designed to handle incoming HTTP requests with multipart/form-data content type,
  which is commonly used for file uploads.
---

import Image from 'next/image';
import fileUpload1 from '/public/assets/file-upload-1.png';
import fileUpload2 from '/public/assets/file-upload-2.png';
import fileUpload3 from '/public/assets/file-upload-3.png';
import fileUpload4 from '/public/assets/file-upload-4.png';
import fileUpload5 from '/public/assets/file-upload-5.png';

# Rest API File Upload Trigger

The Rest API File Upload Trigger is designed to handle incoming HTTP requests with multipart/form-data content type,
which is commonly used for file uploads.

<Image src={fileUpload1} alt='Rest API File Upload Trigger' width={1200} />

When a request is sent to the specified endpoint, the trigger parses the request body and extracts the uploaded file
along with its metadata. The file is then stored in a buffer, which can be used for further processing or storage.

## Input Request Structure

The Upload File Trigger allows you to specify a **Path** and **Method** for the trigger. The **Path** is the URL
endpoint where the trigger will listen for incoming requests. The **Method** is the HTTP method that the trigger will
listen for.

<Image src={fileUpload2} alt='Rest API File Upload Trigger' width={1200} />

The trigger expects an HTTP request with the following structure:

- **Content-Type:** `multipart/form-data`
- **Method:** `POST` or `PUT`
- **Body:** The request body should contain the file data and any additional form fields.

The request body is parsed using the `multer` library, which is a middleware for handling `multipart/form-data` in
Node.js.

## Output

The trigger produces the following output which can be used in subsequent workflow nodes:

<Image src={fileUpload3} alt='Rest API File Upload Trigger' width={1200} />

- **file:** An object containing the uploaded file and its metadata, including:

  - `fieldname`: The name of the field containing the file in the form data.
  - `originalname`: The original name of the file on the user's computer.
  - `mimetype`: The MIME type of the file.
  - `buffer`: A Buffer (Node.js) containing the entire file data.
  - `size`: The size of the file in bytes.
  - `encoding`: The encoding type of the file.

- **body:** An object containing any additional form fields submitted with the request.
- **headers:** An object containing the request headers.

## Usage

Here's a basic template that can be cloned and used as a starting point. This example demonstrates how to use the File
Upload Trigger to handle incoming file uploads and save the file to the BuildShip Cloud Storage to get back a public
URL. ([Click here to clone the template in your project!](https://buildship.app/remix?template=basic-file-upload)) ⭐️

<Image src={fileUpload4} alt='Rest API File Upload Trigger' width={1200} />

## Testing the Trigger

You can test the Rest API File Upload Trigger using tools like Postman or Hoppscotch. Here's an example of how to test
it using Postman:

1. Open Postman and create a new request.
2. Set the request method to `POST` or `PUT`.
3. Copy the endpoint URL from the Trigger's Instructions popover and paste it in the request URL field.
4. Set the request body type to `form-data`.
5. Click the "Choose File" button and select the file you want to upload.
6. If you have additional form fields, you can add them under the "form-data" section.
7. Click the "Send" button to submit the request.

<Image src={fileUpload5} alt='Rest API File Upload Trigger' width={1200} />

If the request is successful, you should see the response from the workflow containing the public URL of the file.
