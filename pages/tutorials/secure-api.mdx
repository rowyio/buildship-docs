# Secure Your API Endpoint

import Image from 'next/image';
import { Callout } from 'nextra/components';
import { Steps } from 'nextra/components';
import secureworkflow from '/public/tutorial/secureworkflow.png';
import condition from '/public/tutorial/authorization.png';
import header from '/public/tutorial/header.png';
import secureAPI from '/public/tutorial/secure-api.png';

As you build workflows on BuildShip and Deploy ðŸš€ it on your application and make it accessible on the internet, you're
going to need to secure it too.

<Image src={secureworkflow} alt='Secure-workflow' width='1200' />

Let's see the best practices and methods on how to do that.

<Callout type='warning' emoji='ðŸ”'>
  Ensure to store keys securely using BuildShip's [Secret Manager](/secrets) as it addresses this concern by providing
  an effective way to safeguard your secret keys using Google Cloud Platform (GCP) Secret Manager under the hood.
</Callout>

## Using Get Authorization Header

<Steps>

### Accessing the API Key and Authorization Header

You can easily **access the user's API key from the Request's Authorization Headers**:

- Click on the **Edit icon (âœŽ)** on the REST API Trigger.
- Add a new input under **Request Headers** - authorization.
- Click on Save.

<Image src={header} alt='authorizarion-header' width='1200' />

### Using the Get Authorization Header Node

This validates the presence of the Authorization Header in the incoming request, ensuring the user's API key is included
and verifying it.

- Add the **Get Authorization Header Node** from the Node Explorer next to the REST API Call.
- In the Request, pass the Request of the REST API Call as a variable.

### Adding Condition to Validate Header

We will use Branch Node to add condition to validate and verify the authorization header in the API request.

- In the condition set the condition as `Authorization Header Value == ${APIKey}`, use variable to do this, refer to
  below image.
- Now you can add the nodes of your workflow to then and else condition accordingly.

<Image src={condition} alt='authorizarion-header-condition' width='1200' />

### Yay! The API Endpoint is Now Secured

You can now test and Ship your workflow without worry and use the endpoint freely on your application. You workflow
should look like this:

<Image src={secureAPI} alt='authorizarion-header-condition-workflow' width='1200' />

</Steps>

<Callout type='tip' emoji='ðŸ’¡'>
  If you are using Firebase as your Database you can refer to a dedicated **Firebase Authenticated User Trigger**, refer
  to this docs [here](/trigger-nodes/firebase-auth).
</Callout>
